<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İnteraktif Rapor: Mikroalg ile Hava Kalitesi Çözümleri</title>
    <!-- Chosen Palette: Calm Harmony (Warm off-white, soft green, sandy beige) -->
    <!-- Application Structure Plan: The SPA uses a thematic, non-linear structure to guide the user from the core problem (disaster-zone air pollution) to the solution (microalgae) and its broader implications. It starts with a high-level introduction, then dives into a technology comparison (interactive PBR chart), explores various applications (tabbed view with another chart), and finally covers the value-add aspects (circular economy diagram, STEM project cards) and future outlook. This structure is designed for better user exploration and understanding than a simple replication of the report's chapters, turning a dense review into an engaging narrative. A new "Live Sensor Data" section is added to simulate real-time monitoring, enhancing the learning station aspect. -->
    <!-- Visualization & Content Choices: PBRs: Goal=Compare -> Viz=Bar Chart (Chart.js) -> Interaction=Buttons to update chart/text. Justification=Interactive comparison is better than a static table. Mobile Systems: Goal=Compare -> Viz=Bar Chart (Chart.js). Justification=Visualizes relative performance. Circular Economy: Goal=Organize/Explain -> Viz=HTML/CSS Diagram. Justification=Simplifies a complex process visually. STEM Projects: Goal=Inform/Organize -> Viz=Interactive Cards. Justification=Modern, clean presentation of examples. Live Sensor Data: Goal=Inform/Monitor -> Viz=HTML/JS numerical display with dynamic text feedback. Justification=Simulates real-time data interaction for learning. All choices avoid SVG/Mermaid as required, using Canvas for charts and structured HTML/CSS for diagrams. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #F8F7F4;
            color: #333D29;
        }
        h1, h2, h3, h4, .font-heading {
            font-family: 'Montserrat', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .active-nav {
            color: #656D4A;
            font-weight: bold;
            border-bottom: 2px solid #656D4A;
        }
        .inactive-nav {
            color: #A2B29F;
        }
        .active-btn {
            background-color: #656D4A;
            color: #F8F7F4;
        }
        .inactive-btn {
            background-color: #A2B29F;
            color: #F8F7F4;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #333D29;
            color: #F8F7F4;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }
        .message-box.show {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#F8F7F4]/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <a href="#hero" class="text-xl font-bold font-heading text-[#656D4A]">BioAlg Çözümleri</a>
                <div class="hidden md:flex space-x-8">
                    <a href="#problem" class="inactive-nav hover:text-[#656D4A] transition-colors">Sorun ve Çözüm</a>
                    <a href="#technology" class="inactive-nav hover:text-[#656D4A] transition-colors">Teknolojiler</a>
                    <a href="#applications" class="inactive-nav hover:text-[#656D4A] transition-colors">Uygulamalar</a>
                    <a href="#value" class="inactive-nav hover:text-[#656D4A] transition-colors">Katma Değer</a>
                    <a href="#sensors" class="inactive-nav hover:text-[#656D4A] transition-colors">Sensör Verileri</a>
                    <a href="#future" class="inactive-nav hover:text-[#656D4A] transition-colors">Gelecek</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="py-20 md:py-32 bg-[#E6EBE0]">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold font-heading text-[#333D29] mb-4">Geleceğin Nefesi: Mikroalgler</h1>
                <p class="text-lg md:text-xl text-[#656D4A] max-w-3xl mx-auto">
                    Afet bölgelerindeki hava kirliliğine karşı doğadan ilham alan, sürdürülebilir ve yenilikçi çözümleri keşfedin. Mikroalglerin karbondioksiti nasıl yakaladığını ve yaşam alanlarımızı nasıl arındırdığını interaktif olarak inceleyin.
                </p>
            </div>
        </section>

        <section id="problem" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Sorun: Görünmez Tehlike ve Güçlü Çözüm</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Afetler sonrası ortaya çıkan toz, partikül madde ve sera gazları, halk sağlığını tehdit eder. Geleneksel yöntemler yetersiz kalırken, doğanın en verimli fotosentez makineleri olan mikroalgler, bu soruna umut vadeden bir çözüm sunuyor.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="bg-white p-8 rounded-lg shadow-lg border border-gray-200">
                        <h3 class="text-2xl font-bold font-heading text-[#A2B29F] mb-3">Geleneksel Yöntemler</h3>
                        <p class="text-[#656D4A]">Genellikle reaktif (kirlilik oluştuktan sonra müdahale eden), enerji yoğun ve sadece partikül filtrelemeye odaklıdır. Karbon yakalama veya oksijen üretme yetenekleri yoktur.</p>
                    </div>
                    <div class="bg-[#B6AD90] p-8 rounded-lg shadow-lg text-white">
                        <h3 class="text-2xl font-bold font-heading text-white mb-3">Mikroalg Yaklaşımı</h3>
                        <p>Karasal bitkilerden <span class="font-bold text-2xl">10-50 kat</span> daha verimli CO₂ yakalama kapasitesine sahiptir. Hem havayı temizler, hem oksijen üretir, hem de değerli biyokütle oluşturur.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="technology" class="py-16 md:py-24 bg-[#E6EBE0]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Teknolojiyi Keşfedin: Fotobiyoreaktör (FBR) Sistemleri</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalgleri yetiştirmek ve verimliliklerini en üst düzeye çıkarmak için farklı teknolojiler kullanılır. Aşağıdaki butonlara tıklayarak temel FBR tasarımlarını, özelliklerini ve CO₂ yakalama verimliliklerini karşılaştırın.
                    </p>
                </div>
                <div class="text-center mb-8 space-x-2 space-y-2">
                    <button id="btn-pbr-1" class="pbr-btn active-btn px-4 py-2 rounded-md font-semibold transition-colors">Açık Havuzlar</button>
                    <button id="btn-pbr-2" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">Tübüler FBR</button>
                    <button id="btn-pbr-3" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">Düz Panel FBR</button>
                    <button id="btn-pbr-4" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">Kabarcık Kolon FBR</button>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div id="pbr-info-card" class="bg-white p-8 rounded-lg shadow-lg transition-opacity duration-500 border border-gray-200">
                        <h3 id="pbr-title" class="text-2xl font-bold font-heading mb-4 text-[#333D29]">Açık Havuzlar</h3>
                        <div id="pbr-description" class="text-[#656D4A]">
                            <p class="mb-2"><strong class="text-[#656D4A]">Avantajları:</strong> Düşük kurulum maliyeti, büyük ölçekli endüstriyel büyüme için uygun.</p><p><strong class="text-[#656D4A]">Dezavantajları:</strong> Geniş alan gereksinimi, dengesiz kültür koşulları, kirlilik riski.</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="pbrChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="applications" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Geniş Uygulama Alanları</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalg teknolojisi, endüstriyel bacalardan evimizdeki havaya kadar çok çeşitli alanlarda devrim yaratma potansiyeline sahiptir. Özellikle taşınabilir sistemler, afet bölgelerinde hızlı ve etkili çözümler sunar.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="space-y-6">
                         <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">Endüstriyel Ölçek</h3>
                            <p class="text-[#656D4A]">Enerji santralleri ve fabrikaların baca gazlarından CO₂'yi yakalayarak hem çevresel etkiyi azaltır hem de değerli biyokütle üretir.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">İç Mekan Hava Kalitesi</h3>
                            <p class="text-[#656D4A]">Ev ve ofislerde CO₂ seviyelerini düşürür, oksijen üretir ve estetik bir "biyofilik" tasarım öğesi olarak insan psikolojisini olumlu etkiler.</p>
                        </div>
                         <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">Mobil ve Afet Çözümleri</h3>
                            <p class="text-[#656D4A]">BIQ-Alg 0CO2 gibi taşınabilir, modüler ve enerji verimli sistemler, afet sonrası geçici barınaklarda ve kriz bölgelerinde hızla devreye alınabilir.</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                         <h3 class="text-xl text-center font-bold font-heading mb-4 text-[#333D29]">Taşınabilir Sistemlerin Performansı</h3>
                         <div class="chart-container h-96">
                            <canvas id="mobileSystemsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="value" class="py-16 md:py-24 bg-[#E6EBE0]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Teknolojinin Ötesi: Katma Değer</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalg sistemleri sadece havayı temizlemekle kalmaz; döngüsel ekonomi ve eğitim alanlarında da önemli faydalar sağlar.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-2xl font-bold font-heading mb-6 text-center text-[#333D29]">Döngüsel Ekonomi: Atıktan Değere</h3>
                        <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                            <div class="text-center p-4 bg-white rounded-lg shadow">
                                <p class="font-bold text-lg font-heading text-[#656D4A]">GİRDİ</p>
                                <p class="text-[#A2B29F]">Atmosferik CO₂</p>
                                <p class="text-[#A2B29F]">Atık Su Besinleri</p>
                            </div>
                            <div class="text-2xl font-bold text-[#656D4A] transform md:-rotate-0 rotate-90">&rarr;</div>
                             <div class="text-center p-4 bg-[#B6AD90] rounded-lg shadow text-white">
                                <p class="font-bold text-lg font-heading">SÜREÇ</p>
                                <p>Mikroalg Fotosentezi</p>
                            </div>
                            <div class="text-2xl font-bold text-[#656D4A] transform md:-rotate-0 rotate-90">&rarr;</div>
                            <div class="text-center p-4 bg-white rounded-lg shadow">
                                <p class="font-bold text-lg font-heading text-[#656D4A]">ÇIKTI (Biyokütle)</p>
                                <p class="text-[#A2B29F]">Biyoyakıt & Gübre</p>
                                <p class="text-[#A2B29F]">Hayvan Yemi & Gıda</p>
                            </div>
                        </div>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold font-heading mb-6 text-center text-[#333D29]">Eğitim ve STEM Farkındalığı</h3>
                        <div id="stem-projects-container" class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                                <h4 class="font-bold text-[#656D4A]">Uygulamalı Öğrenme</h4>
                                <p class="text-sm text-[#A2B29F]">Öğrenciler, "Alglerden İp Yapımı" veya "Kendin Yap Güneş Fırını" gibi projelerle sürdürülebilirlik kavramlarını somut olarak deneyimler.</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                                <h4 class="font-bold text-[#656D4A]">Teknoloji Entegrasyonu</h4>
                                <p class="text-sm text-[#A2B29F]">IoT sensörleri ile sistem verilerini izlemek, öğrencilere veri analizi ve mühendislik becerileri kazandırır.</p>
                            </div>
                        </div>
                        
                        <div class="mt-8 p-6 bg-white rounded-lg shadow-lg border border-gray-200">
                            <h4 class="text-xl font-bold font-heading mb-4 text-[#333D29]">Kendi Projenizi Ekleyin!</h4>
                            <div class="mb-4">
                                <label for="project-title" class="block text-sm font-medium text-[#656D4A] mb-1">Proje Başlığı:</label>
                                <input type="text" id="project-title" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A2B29F]" placeholder="Örn: Evde Atık Su Arıtma Projesi">
                            </div>
                            <div class="mb-4">
                                <label for="project-description" class="block text-sm font-medium text-[#656D4A] mb-1">Proje Açıklaması:</label>
                                <textarea id="project-description" rows="3" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A2B29F]" placeholder="Projenin kısa bir açıklamasını girin..."></textarea>
                            </div>
                            <button id="add-project-btn" class="active-btn px-6 py-2 rounded-md font-semibold transition-colors w-full">Proje Ekle</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="sensors" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Canlı Sensör Verileri: Mikroalg Sistemini İzleyin</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Bu bölüm, mikroalg sisteminin canlı (simüle edilmiş) çevresel verilerini göstermektedir. Veriler belirli aralıklarla güncellenerek sistemin durumu hakkında anlık geri bildirim sağlar.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">CO₂ Seviyesi</h3>
                        <p id="co2-value" class="text-4xl font-bold text-[#333D29] mt-2">-- ppm</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">O₂ Seviyesi</h3>
                        <p id="o2-value" class="text-4xl font-bold text-[#333D29] mt-2">-- %</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">pH Değeri</h3>
                        <p id="ph-value" class="text-4xl font-bold text-[#333D29] mt-2">--</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">Su Sıcaklığı</h3>
                        <p id="temp-value" class="text-4xl font-bold text-[#333D29] mt-2">-- °C</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200 text-center">
                    <h3 class="text-xl font-bold font-heading text-[#333D29] mb-4">Sistem Durumu Mesajı</h3>
                    <p id="status-message" class="text-lg text-[#656D4A]">Sensör verileri yükleniyor...</p>
                </div>

                <!--
                Gerçek zamanlı sensör verilerini aktarmak ve depolamak için bir Firebase Firestore entegrasyonu aşağıdaki gibi düşünülebilir:

                1.  **Firebase Projesi Oluşturma:** Firebase konsolunda yeni bir proje oluşturun ve Firestore veritabanını etkinleştirin.
                2.  **Web Uygulamanızı Firebase'e Bağlama:** `<head>` veya `<script>` etiketlerinde Firebase SDK'sını içe aktarın:
                    <script type="module">
                    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
                    import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

                    // Canvas tarafından sağlanan global değişkenleri kullanın
                    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

                    // Firebase'i başlat
                    const app = initializeApp(firebaseConfig);
                    const db = getFirestore(app);

                    // Firestore'dan gerçek zamanlı sensör verilerini dinleme (örneğin 'sensors' koleksiyonundaki 'current_data' belgesi)
                    const sensorDocRef = doc(db, `artifacts/${appId}/public/data/sensors/current_data`);
                    onSnapshot(sensorDocRef, (docSnap) => {
                        if (docSnap.exists()) {
                            const data = docSnap.data();
                            // HTML elementlerini alınan verilerle güncelle
                            document.getElementById('co2-value').innerText = `${data.co2} ppm`;
                            document.getElementById('o2-value').innerText = `${data.o2} %`;
                            document.getElementById('ph-value').innerText = `${data.pH}`;
                            document.getElementById('temp-value').innerText = `${data.temperature} °C`;
                            updateStatusMessage(data.co2, data.o2, data.pH, data.temperature); // Mevcut fonksiyonu kullan
                        } else {
                            console.log("Sensör verisi bulunamadı!");
                        }
                    }, (error) => {
                        console.error("Firestore'dan veri çekerken hata oluştu:", error);
                    });
                    </script>

                3.  **Sensör Tarafında Veri Gönderme:** Sensör verilerini okuyan bir mikrodenetleyici (Arduino, ESP32, Raspberry Pi vb.) bir sunucu (Node.js, Python Flask) aracılığıyla veya doğrudan Firebase SDK'sını kullanarak Firestore'a veri yazabilir. Örneğin:
                    `await setDoc(doc(db, "artifacts", appId, "public", "data", "sensors", "current_data"), { co2: 450, o2: 21, pH: 7.5, temperature: 25, timestamp: new Date() });`

                Bu entegrasyon, gerçek bir öğrenme istasyonu için verilerin sürekli olarak güncellenmesini ve etkileşimli bir deneyim sunulmasını sağlar.
                -->
            </div>
        </section>

        <section id="future" class="py-16 md:py-24">
             <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Gelecek Vizyonu ve Öneriler</h2>
                     <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Bu teknolojinin potansiyelini tam olarak hayata geçirmek için stratejik adımlar atılmalıdır.
                    </p>
                </div>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">⚙️</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Teknoloji Geliştirme</h3>
                        <p class="text-[#656D4A]">Daha dayanıklı alg türleri araştırmak, FBR tasarımlarını optimize etmek ve maliyetleri düşürmek.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">🌍</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Saha Uygulamaları</h3>
                        <p class="text-[#656D4A]">Mobil ünitelerin afet senaryolarında test edilmesi ve mevcut altyapılarla entegrasyonu.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">🤝</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Ekonomik Sürdürülebilirlik</h3>
                        <p class="text-[#656D4A]">Biyokütle yan ürünlerinin pazarını geliştirmek ve yatırım için yeni finansman modelleri oluşturmak.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#333D29] text-[#F8F7F4] py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 İnteraktif Rapor. Literatür Taraması Verilerinden Oluşturulmuştur.</p>
            <p class="text-sm text-[#A2B29F] mt-2">Bu uygulama, BIQ-Alg 0CO2 projesinin literatür taraması raporundan esinlenmiştir.</p>
        </div>
    </footer>

    <div id="message-box" class="message-box">
        <p id="message-text"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const pbrData = {
                labels: ['CO₂ Fiksasyon Verimliliği (%)'],
                datasets: [
                    { label: 'Açık Havuzlar', data: [90], backgroundColor: '#A2B29F' },
                    { label: 'Tübüler FBR', data: [76], backgroundColor: '#656D4A', hidden: true },
                    { label: 'Düz Panel FBR', data: [85], backgroundColor: '#B6AD90', hidden: true },
                    { label: 'Kabarcık Kolon FBR', data: [90], backgroundColor: '#333D29', hidden: true }
                ]
            };
            
            const pbrInfo = {
                'btn-pbr-1': { title: 'Açık Havuzlar', description: '<p class="mb-2"><strong class="text-[#656D4A]">Avantajları:</strong> Düşük kurulum maliyeti, büyük ölçekli endüstriyel büyüme için uygun.</p><p><strong class="text-[#656D4A]">Dezavantajları:</strong> Geniş alan gereksinimi, dengesiz kültür koşulları, kirlilik riski.</p>' },
                'btn-pbr-2': { title: 'Tübüler FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">Avantajları:</strong> Aseptik çalışma, stabil koşullar, su buharlaşmasını önler, mimari entegrasyon potansiyeli.</p><p><strong class="text-[#656D4A]">Dezavantajları:</strong> Yüksek inşaat ve işletme maliyetleri.</p>' },
                'btn-pbr-3': { title: 'Düz Panel FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">Avantajları:</strong> Olağanüstü CO₂ emilimi, optimize edilmiş mikroalg büyümesi, yüksek karbon tutulumu.</p><p><strong class="text-[#656D4A]">Dezavantajları:</strong> Yüksek teknoloji gereksinimi.</p>' },
                'btn-pbr-4': { title: 'Kabarcık Kolon FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">Avantajları:</strong> Sıcaklık kontrolü, düşük basınç düşüşü, yüksek arayüzey alanı.</p><p><strong class="text-[#656D4A]">Dezavantajları:</strong> Yüksek konsantrasyonlarda etkilidir, daha karmaşık yapı.</p>' }
            };

            const pbrCtx = document.getElementById('pbrChart').getContext('2d');
            const pbrChart = new Chart(pbrCtx, {
                type: 'bar',
                data: pbrData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Verimlilik (%)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });

            const pbrButtons = document.querySelectorAll('.pbr-btn');
            pbrButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    pbrButtons.forEach(btn => {
                        btn.classList.remove('active-btn');
                        btn.classList.add('inactive-btn');
                    });
                    button.classList.add('active-btn');
                    button.classList.remove('inactive-btn');

                    pbrChart.data.datasets.forEach((dataset, i) => {
                        dataset.hidden = (i !== index);
                    });
                    pbrChart.update();
                    
                    const info = pbrInfo[button.id];
                    document.getElementById('pbr-title').innerText = info.title;
                    document.getElementById('pbr-description').innerHTML = info.description;
                });
            });

            const mobileSystemsData = {
                labels: ['aerium', 'Vayu', 'Liquid 3'],
                datasets: [{
                    label: 'Eşdeğer Ev Bitkisi/Ağaç Sayısı',
                    data: [25, 40, 200], 
                    backgroundColor: ['#A2B29F', '#656D4A', '#B6AD90'],
                    borderColor: '#F8F7F4',
                    borderWidth: 2
                }]
            };

            const mobileSystemsCtx = document.getElementById('mobileSystemsChart').getContext('2d');
            new Chart(mobileSystemsCtx, {
                type: 'doughnut',
                data: mobileSystemsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        let value = context.parsed;
                                        if (context.label === 'Liquid 3') {
                                           label += `${value / 100} ağaca eşdeğer`;
                                        } else {
                                           label += `${value} ev bitkisine eşdeğer`;
                                        }
                                    }
                                    return label;
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Performans (Eşdeğer Bitki/Ağaç Sayısı)',
                            padding: { top: 10, bottom: 10 }
                        }
                    }
                }
            });
            
            const navLinks = document.querySelectorAll('header nav a');
            const sections = document.querySelectorAll('main section');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    link.classList.add('inactive-nav');
                    if (link.href.includes(current)) {
                        link.classList.add('active-nav');
                        link.classList.remove('inactive-nav');
                    }
                });
            });

            // STEM Project Addition Logic
            const addProjectBtn = document.getElementById('add-project-btn');
            const projectTitleInput = document.getElementById('project-title');
            const projectDescriptionInput = document.getElementById('project-description');
            const stemProjectsContainer = document.getElementById('stem-projects-container');
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');

            function showMessage(message, duration = 3000) {
                messageText.innerText = message;
                messageBox.classList.add('show');
                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, duration);
            }

            addProjectBtn.addEventListener('click', () => {
                const title = projectTitleInput.value.trim();
                const description = projectDescriptionInput.value.trim();

                if (title === '' || description === '') {
                    showMessage('Lütfen proje başlığı ve açıklamasını girin.');
                    return;
                }

                const newProjectDiv = document.createElement('div');
                newProjectDiv.className = 'bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow';
                newProjectDiv.innerHTML = `
                    <h4 class="font-bold text-[#656D4A]">${title}</h4>
                    <p class="text-sm text-[#A2B29F]">${description}</p>
                `;
                stemProjectsContainer.appendChild(newProjectDiv);

                projectTitleInput.value = '';
                projectDescriptionInput.value = '';
                showMessage('Proje başarıyla eklendi!');
            });

            // Sensor Data Simulation Logic
            const co2ValueSpan = document.getElementById('co2-value');
            const o2ValueSpan = document.getElementById('o2-value');
            const phValueSpan = document.getElementById('ph-value');
            const tempValueSpan = document.getElementById('temp-value');
            const statusMessageP = document.getElementById('status-message');

            function generateSimulatedSensorData() {
                const co2 = (Math.random() * (1000 - 350) + 350).toFixed(0); // 350-1000 ppm
                const o2 = (Math.random() * (22 - 18) + 18).toFixed(1);     // 18-22%
                const ph = (Math.random() * (8.5 - 6.5) + 6.5).toFixed(1);  // 6.5-8.5
                const temp = (Math.random() * (30 - 20) + 20).toFixed(1);   // 20-30°C
                return { co2: parseInt(co2), o2: parseFloat(o2), pH: parseFloat(ph), temperature: parseFloat(temp) };
            }

            function updateStatusMessage(co2, o2, ph, temp) {
                let message = 'Sistem durumu iyi. Mikroalgler aktif olarak çalışıyor.';

                if (co2 > 800) {
                    message = 'Yüksek CO₂ seviyesi tespit edildi! Mikroalglerin fotosentezi hızlanabilir.';
                } else if (co2 < 400) {
                    message = 'CO₂ seviyesi düşük, fotosentez yavaşlayabilir. CO₂ takviyesi düşünülebilir.';
                }

                if (o2 < 19) {
                    message += ' Düşük O₂ seviyesi, havalandırma kontrol edilmeli.';
                }

                if (ph < 7.0) {
                    message += ' pH değeri asidik tarafta, alg büyümesi için optimize edilmeli.';
                } else if (ph > 8.0) {
                    message += ' pH değeri bazik tarafta, alg büyümesi için optimize edilmeli.';
                }

                if (temp > 28) {
                    message += ' Su sıcaklığı yüksek, soğutma gerekli olabilir.';
                } else if (temp < 22) {
                    message += ' Su sıcaklığı düşük, ısıtma gerekli olabilir.';
                }
                statusMessageP.innerText = message;
            }

            function updateSensorDisplay() {
                const data = generateSimulatedSensorData();
                co2ValueSpan.innerText = `${data.co2} ppm`;
                o2ValueSpan.innerText = `${data.o2} %`;
                phValueSpan.innerText = `${data.pH}`;
                tempValueSpan.innerText = `${data.temperature} °C`;
                updateStatusMessage(data.co2, data.o2, data.pH, data.temperature);
            }

            // Update sensors every 5 seconds
            setInterval(updateSensorDisplay, 5000);
            updateSensorDisplay(); // Initial display
        });
    </script>
</body>
</html>
