<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°nteraktif Rapor: Mikroalg ile Hava Kalitesi Ã‡Ã¶zÃ¼mleri</title>
    <!-- SeÃ§ilen Palet: Sakin Uyum (SÄ±cak kirli beyaz, yumuÅŸak yeÅŸil, kumlu bej) -->
    <!-- Uygulama YapÄ±sÄ± PlanÄ±: SPA, kullanÄ±cÄ±yÄ± temel sorundan (afet bÃ¶lgesindeki hava kirliliÄŸi) Ã§Ã¶zÃ¼me (mikroalgler) ve bunun daha geniÅŸ etkilerine yÃ¶nlendiren tematik, doÄŸrusal olmayan bir yapÄ± kullanÄ±r. YÃ¼ksek seviyeli bir giriÅŸle baÅŸlar, ardÄ±ndan teknoloji karÅŸÄ±laÅŸtÄ±rmasÄ±na (interaktif FBR grafiÄŸi) dalar, Ã§eÅŸitli uygulamalarÄ± (baÅŸka bir grafik iÃ§eren sekmeli gÃ¶rÃ¼nÃ¼m) keÅŸfeder ve son olarak katma deÄŸer yÃ¶nlerini (dÃ¶ngÃ¼sel ekonomi diyagramÄ±, STEM proje kartlarÄ±) ve gelecek gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ kapsar. Bu yapÄ±, raporun bÃ¶lÃ¼mlerinin basit bir kopyasÄ± yerine kullanÄ±cÄ± keÅŸfini ve anlamasÄ±nÄ± kolaylaÅŸtÄ±rmak iÃ§in tasarlanmÄ±ÅŸtÄ±r, yoÄŸun bir incelemeyi ilgi Ã§ekici bir anlatÄ±ya dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r. Yeni bir "CanlÄ± SensÃ¶r Verileri" bÃ¶lÃ¼mÃ¼, Firebase Firestore'dan gerÃ§ek zamanlÄ± sensÃ¶r verilerini okumak ve gÃ¶rÃ¼ntÃ¼lemek iÃ§in eklenmiÅŸtir; ÅŸimdi MQ135 (hava kalitesi), IÅŸÄ±k, SÄ±caklÄ±k ve Nem sensÃ¶rlerini iÃ§erir ve pH'Ä± deÄŸiÅŸtirir. AyrÄ±ca, sensÃ¶r verilerini grafiksel olarak gÃ¶rselleÅŸtirme ve CSV olarak dÄ±ÅŸa aktarma Ã¶zellikleri eklenmiÅŸtir. -->
    <!-- GÃ¶rselleÅŸtirme ve Ä°Ã§erik SeÃ§imleri: FBR'ler: AmaÃ§=KarÅŸÄ±laÅŸtÄ±r -> GÃ¶rselleÅŸtirme=Ã‡ubuk Grafik (Chart.js) -> EtkileÅŸim=Grafik/metni gÃ¼ncellemek iÃ§in dÃ¼ÄŸmeler. GerekÃ§e=Ä°nteraktif karÅŸÄ±laÅŸtÄ±rma, statik bir tablodan daha iyidir. Mobil Sistemler: AmaÃ§=KarÅŸÄ±laÅŸtÄ±r -> GÃ¶rselleÅŸtirme=Ã‡ubuk Grafik (Chart.js). GerekÃ§e=GÃ¶receli performansÄ± gÃ¶rselleÅŸtirir. DÃ¶ngÃ¼sel Ekonomi: AmaÃ§=Organize Et/AÃ§Ä±kla -> GÃ¶rselleÅŸtirme=HTML/CSS DiyagramÄ±. GerekÃ§e=KarmaÅŸÄ±k bir sÃ¼reci gÃ¶rsel olarak basitleÅŸtirir. STEM Projeleri: AmaÃ§=Bilgilendir/Organize Et -> GÃ¶rselleÅŸtirme=Ä°nteraktif Kartlar. GerekÃ§e=Modern, temiz bir Ã¶rnek sunumu. CanlÄ± SensÃ¶r Verileri: AmaÃ§=Bilgilendir/Ä°zle -> GÃ¶rselleÅŸtirme=Dinamik metin geri bildirimi iÃ§eren HTML/JS sayÄ±sal ekran ve Chart.js ile Ã§izelgeler, Firebase Firestore'dan veri Ã§ekme (MQ135, IÅŸÄ±k, SÄ±caklÄ±k, Nem). GerekÃ§e=Ã–ÄŸrenme iÃ§in gerÃ§ek zamanlÄ± veri etkileÅŸimi. TÃ¼m seÃ§imler SVG/Mermaid kullanÄ±mÄ±ndan kaÃ§Ä±nÄ±r, Ã§izelgeler iÃ§in Canvas ve diyagramlar iÃ§in yapÄ±landÄ±rÄ±lmÄ±ÅŸ HTML/CSS kullanÄ±r. -->
    <!-- ONAYLAMA: SVG grafikleri kullanÄ±lmamÄ±ÅŸtÄ±r. Mermaid JS kullanÄ±lmamÄ±ÅŸtÄ±r. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #F8F7F4;
            color: #333D29;
        }
        h1, h2, h3, h4, .font-heading {
            font-family: 'Montserrat', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Sabit yÃ¼kseklik, duyarlÄ± hale getirmek iÃ§in medya sorgularÄ± kullanÄ±labilir */
            max-height: 400px; /* Maksimum yÃ¼kseklik */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px; /* Daha bÃ¼yÃ¼k ekranlarda biraz daha yÃ¼ksek */
            }
        }
        .active-nav {
            color: #656D4A;
            font-weight: bold;
            border-bottom: 2px solid #656D4A;
        }
        .inactive-nav {
            color: #A2B29F;
        }
        .active-btn {
            background-color: #656D4A;
            color: #F8F7F4;
        }
        .inactive-btn {
            background-color: #A2B29F;
            color: #F8F7F4;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #333D29;
            color: #F8F7F4;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }
        .message-box.show {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#F8F7F4]/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <a href="#hero" class="text-xl font-bold font-heading text-[#656D4A] flex items-center">
                    <img src="https://placehold.co/40x40/E6EBE0/333D29?text=Logo" onerror="this.onerror=null; this.src='logo111.png'" alt="BioAlg Logosu" class="h-8 md:h-10 w-auto mr-2 inline-block align-middle">
                    BioAlg Ã‡Ã¶zÃ¼mleri
                </a>
                <div class="hidden md:flex space-x-8">
                    <a href="#problem" class="inactive-nav hover:text-[#656D4A] transition-colors">Sorun ve Ã‡Ã¶zÃ¼m</a>
                    <a href="#technology" class="inactive-nav hover:text-[#656D4A] transition-colors">Teknolojiler</a>
                    <a href="#applications" class="inactive-nav hover:text-[#656D4A] transition-colors">Uygulamalar</a>
                    <a href="#value" class="inactive-nav hover:text-[#656D4A] transition-colors">Katma DeÄŸer</a>
                    <a href="#sensors" class="inactive-nav hover:text-[#656D4A] transition-colors">SensÃ¶r Verileri</a>
                    <a href="#future" class="inactive-nav hover:text-[#656D4A] transition-colors">Gelecek</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="py-20 md:py-32 bg-[#E6EBE0]">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold font-heading text-[#333D29] mb-4">GeleceÄŸin Nefesi: Mikroalgler</h1>
                <p class="text-lg md:text-xl text-[#656D4A] max-w-3xl mx-auto">
                    Afet bÃ¶lgelerindeki hava kirliliÄŸine karÅŸÄ± doÄŸadan ilham alan, sÃ¼rdÃ¼rÃ¼lebilir ve yenilikÃ§i Ã§Ã¶zÃ¼mleri keÅŸfedin. Mikroalglerin karbondioksiti nasÄ±l yakaladÄ±ÄŸÄ±nÄ± ve yaÅŸam alanlarÄ±mÄ±zÄ± nasÄ±l arÄ±ndÄ±rdÄ±ÄŸÄ±nÄ± interaktif olarak inceleyin.
                </p>
            </div>
        </section>

        <section id="problem" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Sorun: GÃ¶rÃ¼nmez Tehlike ve GÃ¼Ã§lÃ¼ Ã‡Ã¶zÃ¼m</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Afetler sonrasÄ± ortaya Ã§Ä±kan toz, partikÃ¼l madde ve sera gazlarÄ±, halk saÄŸlÄ±ÄŸÄ±nÄ± tehdit eder. Geleneksel yÃ¶ntemler yetersiz kalÄ±rken, doÄŸanÄ±n en verimli fotosentez makineleri olan mikroalgler, bu soruna umut vadeden bir Ã§Ã¶zÃ¼m sunuyor.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="bg-white p-8 rounded-lg shadow-lg border border-gray-200">
                        <h3 class="text-2xl font-bold font-heading text-[#A2B29F] mb-3">Geleneksel YÃ¶ntemler</h3>
                        <p class="text-[#656D4A]">Genellikle reaktif (kirlilik oluÅŸtuktan sonra mÃ¼dahale eden), enerji yoÄŸun ve sadece partikÃ¼l filtrelemeye odaklÄ±dÄ±r. Karbon yakalama veya oksijen Ã¼retme yetenekleri yoktur.</p>
                    </div>
                    <div class="bg-[#B6AD90] p-8 rounded-lg shadow-lg text-white">
                        <h3 class="text-2xl font-bold font-heading text-white mb-3">Mikroalg YaklaÅŸÄ±mÄ±</h3>
                        <p>Karasal bitkilerden <span class="font-bold text-2xl">10-50 kat</span> daha verimli COâ‚‚ yakalama kapasitesine sahiptir. Hem havayÄ± temizler, hem oksijen Ã¼retir, hem de deÄŸerli biyokÃ¼tle oluÅŸturur.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="technology" class="py-16 md:py-24 bg-[#E6EBE0]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Teknolojiyi KeÅŸfedin: FotobiyoreaktÃ¶r (FBR) Sistemleri</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalgleri yetiÅŸtirmek ve verimliliklerini en Ã¼st dÃ¼zeye Ã§Ä±karmak iÃ§in farklÄ± teknolojiler kullanÄ±lÄ±r. AÅŸaÄŸÄ±daki butonlara tÄ±klayarak temel FBR tasarÄ±mlarÄ±nÄ±, Ã¶zelliklerini ve COâ‚‚ yakalama verimliliklerini karÅŸÄ±laÅŸtÄ±rÄ±n.
                    </p>
                </div>
                <div class="text-center mb-8 space-x-2 space-y-2">
                    <button id="btn-pbr-1" class="pbr-btn active-btn px-4 py-2 rounded-md font-semibold transition-colors">AÃ§Ä±k Havuzlar</button>
                    <button id="btn-pbr-2" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">TÃ¼bÃ¼ler FBR</button>
                    <button id="btn-pbr-3" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">DÃ¼z Panel FBR</button>
                    <button id="btn-pbr-4" class="pbr-btn inactive-btn px-4 py-2 rounded-md font-semibold transition-colors">KabarcÄ±k Kolon FBR</button>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div id="pbr-info-card" class="bg-white p-8 rounded-lg shadow-lg transition-opacity duration-500 border border-gray-200">
                        <h3 id="pbr-title" class="text-2xl font-bold font-heading mb-4 text-[#333D29]">AÃ§Ä±k Havuzlar</h3>
                        <div id="pbr-description" class="text-[#656D4A]">
                            <p class="mb-2"><strong class="text-[#656D4A]">AvantajlarÄ±:</strong> DÃ¼ÅŸÃ¼k kurulum maliyeti, bÃ¼yÃ¼k Ã¶lÃ§ekli endÃ¼striyel bÃ¼yÃ¼me iÃ§in uygun.</p><p><strong class="text-[#656D4A]">DezavantajlarÄ±:</strong> GeniÅŸ alan gereksinimi, dengesiz kÃ¼ltÃ¼r koÅŸullarÄ±, kirlilik riski.</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="pbrChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="applications" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">GeniÅŸ Uygulama AlanlarÄ±</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalg teknolojisi, endÃ¼striyel bacalardan evimizdeki havaya kadar Ã§ok Ã§eÅŸitli alanlarda devrim yaratma potansiyeline sahiptir. Ã–zellikle taÅŸÄ±nabilir sistemler, afet bÃ¶lgelerinde hÄ±zlÄ± ve etkili Ã§Ã¶zÃ¼mler sunar.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="space-y-6">
                         <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">EndÃ¼striyel Ã–lÃ§ek</h3>
                            <p class="text-[#656D4A]">Enerji santralleri ve fabrikalarÄ±n baca gazlarÄ±ndan COâ‚‚'yi yakalayarak hem Ã§evresel etkiyi azaltÄ±r hem de deÄŸerli biyokÃ¼tle Ã¼retir.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">Ä°Ã§ Mekan Hava Kalitesi</h3>
                            <p class="text-[#656D4A]">Ev ve ofislerde COâ‚‚ seviyelerini dÃ¼ÅŸÃ¼rÃ¼r, oksijen Ã¼retir ve estetik bir "biyofilik" tasarÄ±m Ã¶ÄŸesi olarak insan psikolojisini olumlu etkiler.</p>
                        </div>
                         <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                            <h3 class="text-xl font-bold font-heading mb-2 text-[#333D29]">Mobil ve Afet Ã‡Ã¶zÃ¼mleri</h3>
                            <p class="text-[#656D4A]">BIQ-Alg 0CO2 gibi taÅŸÄ±nabilir, modÃ¼ler ve enerji verimli sistemler, afet sonrasÄ± geÃ§ici barÄ±naklarda ve kriz bÃ¶lgelerinde hÄ±zla devreye alÄ±nabilir.</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                         <h3 class="text-xl text-center font-bold font-heading mb-4 text-[#333D29]">TaÅŸÄ±nabilir Sistemlerin PerformansÄ±</h3>
                         <div class="chart-container h-96">
                            <canvas id="mobileSystemsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="value" class="py-16 md:py-24 bg-[#E6EBE0]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Teknolojinin Ã–tesi: Katma DeÄŸer</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Mikroalg sistemleri sadece havayÄ± temizlemekle kalmaz; dÃ¶ngÃ¼sel ekonomi ve eÄŸitim alanlarÄ±nda da Ã¶nemli faydalar saÄŸlar.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-2xl font-bold font-heading mb-6 text-center text-[#333D29]">DÃ¶ngÃ¼sel Ekonomi: AtÄ±ktan DeÄŸere</h3>
                        <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                            <div class="text-center p-4 bg-white rounded-lg shadow">
                                <p class="font-bold text-lg font-heading text-[#656D4A]">GÄ°RDÄ°</p>
                                <p class="text-[#A2B29F]">Atmosferik COâ‚‚</p>
                                <p class="text-[#A2B29F]">AtÄ±k Su Besinleri</p>
                            </div>
                            <div class="text-2xl font-bold text-[#656D4A] transform md:-rotate-0 rotate-90">&rarr;</div>
                             <div class="text-center p-4 bg-[#B6AD90] rounded-lg shadow text-white">
                                <p class="font-bold text-lg font-heading">SÃœREÃ‡</p>
                                <p>Mikroalg Fotosentezi</p>
                            </div>
                            <div class="text-2xl font-bold text-[#656D4A] transform md:-rotate-0 rotate-90">&rarr;</div>
                            <div class="text-center p-4 bg-white rounded-lg shadow">
                                <p class="font-bold text-lg font-heading text-[#656D4A]">Ã‡IKTI (BiyokÃ¼tle)</p>
                                <p class="text-[#A2B29F]">BiyoyakÄ±t & GÃ¼bre</p>
                                <p class="text-[#A2B29F]">Hayvan Yemi & GÄ±da</p>
                            </div>
                        </div>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold font-heading mb-6 text-center text-[#333D29]">EÄŸitim ve STEM FarkÄ±ndalÄ±ÄŸÄ±</h3>
                        <div id="stem-projects-container" class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                                <h4 class="font-bold text-[#656D4A]">UygulamalÄ± Ã–ÄŸrenme</h4>
                                <p class="text-sm text-[#A2B29F]">Ã–ÄŸrenciler, "Alglerden Ä°p YapÄ±mÄ±" veya "Kendin Yap GÃ¼neÅŸ FÄ±rÄ±nÄ±" gibi projelerle sÃ¼rdÃ¼rÃ¼lebilirlik kavramlarÄ±nÄ± somut olarak deneyimler.</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                                <h4 class="font-bold text-[#656D4A]">Teknoloji Entegrasyonu</h4>
                                <p class="text-sm text-[#A2B29F]">IoT sensÃ¶rleri ile sistem verilerini izlemek, Ã¶ÄŸrencilere veri analizi ve mÃ¼hendislik becerileri kazandÄ±rÄ±r.</p>
                            </div>
                        </div>
                        
                        <div class="mt-8 p-6 bg-white rounded-lg shadow-lg border border-gray-200">
                            <h4 class="text-xl font-bold font-heading mb-4 text-[#333D29]">Kendi Projenizi Ekleyin!</h4>
                            <div class="mb-4">
                                <label for="project-title" class="block text-sm font-medium text-[#656D4A] mb-1">Proje BaÅŸlÄ±ÄŸÄ±:</label>
                                <input type="text" id="project-title" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A2B29F]" placeholder="Ã–rn: Evde AtÄ±k Su ArÄ±tma Projesi">
                            </div>
                            <div class="mb-4">
                                <label for="project-description" class="block text-sm font-medium text-[#656D4A] mb-1">Proje AÃ§Ä±klamasÄ±:</label>
                                <textarea id="project-description" rows="3" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A2B29F]" placeholder="Projenin kÄ±sa bir aÃ§Ä±klamasÄ±nÄ± girin..."></textarea>
                            </div>
                            <button id="add-project-btn" class="active-btn px-6 py-2 rounded-md font-semibold transition-colors w-full">Proje Ekle</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="sensors" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">CanlÄ± SensÃ¶r Verileri: Mikroalg Sistemini Ä°zleyin</h2>
                    <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Bu bÃ¶lÃ¼m, mikroalg sisteminin canlÄ± Ã§evresel verilerini gÃ¶stermektedir. Veriler, donanÄ±mdan gelen gerÃ§ek zamanlÄ± akÄ±ÅŸla gÃ¼ncellenecektir.
                    </p>
                </div>
                <!-- SayÄ±sal SensÃ¶r DeÄŸerleri -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">COâ‚‚ Seviyesi</h3>
                        <p id="co2-value" class="text-4xl font-bold text-[#333D29] mt-2">-- ppm</p>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">Hava Kalitesi (MQ135)</h3>
                        <p id="mq135-value" class="text-4xl font-bold text-[#333D29] mt-2">-- mV</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">IÅŸÄ±k Åiddeti</h3>
                        <p id="light-value" class="text-4xl font-bold text-[#333D29] mt-2">-- lux</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border border-gray-200">
                        <h3 class="text-xl font-bold font-heading text-[#656D4A]">SÄ±caklÄ±k ve Nem</h3>
                        <p id="temp-value" class="text-4xl font-bold text-[#333D29] mt-2">-- Â°C</p>
                        <p id="humidity-value" class="text-4xl font-bold text-[#333D29] mt-2">-- %</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200 text-center mb-8">
                    <h3 class="text-xl font-bold font-heading text-[#333D29] mb-4">Sistem Durumu MesajÄ±</h3>
                    <p id="status-message" class="text-lg text-[#656D4A]">SensÃ¶r verileri yÃ¼kleniyor...</p>
                </div>

                <!-- Grafiksel SensÃ¶r Verileri -->
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold font-heading text-[#333D29] mb-4">Veri Grafikleri (Son 30 Okuma)</h3>
                    <button id="download-csv-btn" class="active-btn px-6 py-2 rounded-md font-semibold transition-colors">Verileri CSV Olarak Ä°ndir</button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <h4 class="text-lg font-bold font-heading text-[#656D4A] mb-4 text-center">COâ‚‚ Seviyesi Trendi</h4>
                        <div class="chart-container">
                            <canvas id="co2ChartCanvas"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <h4 class="text-lg font-bold font-heading text-[#656D4A] mb-4 text-center">Hava Kalitesi (MQ135) Trendi</h4>
                        <div class="chart-container">
                            <canvas id="mq135ChartCanvas"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <h4 class="text-lg font-bold font-heading text-[#656D4A] mb-4 text-center">IÅŸÄ±k Åiddeti Trendi</h4>
                        <div class="chart-container">
                            <canvas id="lightChartCanvas"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <h4 class="text-lg font-bold font-heading text-[#656D4A] mb-4 text-center">SÄ±caklÄ±k ve Nem Trendi</h4>
                        <div class="chart-container">
                            <canvas id="tempHumidityChartCanvas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="future" class="py-16 md:py-24">
             <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold font-heading text-[#333D29]">Gelecek Vizyonu ve Ã–neriler</h2>
                     <p class="mt-4 text-lg text-[#656D4A] max-w-3xl mx-auto">
                        Bu teknolojinin potansiyelini tam olarak hayata geÃ§irmek iÃ§in stratejik adÄ±mlar atÄ±lmalÄ±dÄ±r.
                    </p>
                </div>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">âš™ï¸</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Teknoloji GeliÅŸtirme</h3>
                        <p class="text-[#656D4A]">Daha dayanÄ±klÄ± alg tÃ¼rleri araÅŸtÄ±rmak, FBR tasarÄ±mlarÄ±nÄ± optimize etmek ve maliyetleri dÃ¼ÅŸÃ¼rmek.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">ğŸŒ</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Saha UygulamalarÄ±</h3>
                        <p class="text-[#656D4A]">Mobil Ã¼nitelerin afet senaryolarÄ±nda test edilmesi ve mevcut altyapÄ±larla entegrasyonu.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <div class="text-4xl mb-4 text-[#B6AD90]">ğŸ¤</div>
                        <h3 class="text-xl font-bold font-heading mb-2">Ekonomik SÃ¼rdÃ¼rÃ¼lebilirlik</h3>
                        <p class="text-[#656D4A]">BiyokÃ¼tle yan Ã¼rÃ¼nlerinin pazarÄ±nÄ± geliÅŸtirmek ve yatÄ±rÄ±m iÃ§in yeni finansman modelleri oluÅŸturmak.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#333D29] text-[#F8F7F4] py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Ä°nteraktif Rapor. LiteratÃ¼r TaramasÄ± Verilerinden OluÅŸturulmuÅŸtur.</p>
            <p class="text-sm text-[#A2B29F] mt-2">Bu uygulama, BIQ-Alg 0CO2 projesinin literatÃ¼r taramasÄ± raporundan esinlenmiÅŸtir.</p>
        </div>
    </footer>

    <div id="message-box" class="message-box">
        <p id="message-text"></p>
    </div>

    <script type="module">
        // Firebase SDK'larÄ±nÄ± iÃ§e aktarÄ±n
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', function () {
            
            // Mevcut pbrData ve pbrInfo tanÄ±mlamalarÄ±... (Bu kÄ±sÄ±m deÄŸiÅŸmedi)
            const pbrData = {
                labels: ['COâ‚‚ Fiksasyon VerimliliÄŸi (%)'],
                datasets: [
                    { label: 'AÃ§Ä±k Havuzlar', data: [90], backgroundColor: '#A2B29F' },
                    { label: 'TÃ¼bÃ¼ler FBR', data: [76], backgroundColor: '#656D4A', hidden: true },
                    { label: 'DÃ¼z Panel FBR', data: [85], backgroundColor: '#B6AD90', hidden: true },
                    { label: 'KabarcÄ±k Kolon FBR', data: [90], backgroundColor: '#333D29', hidden: true }
                ]
            };
            
            const pbrInfo = {
                'btn-pbr-1': { title: 'AÃ§Ä±k Havuzlar', description: '<p class="mb-2"><strong class="text-[#656D4A]">AvantajlarÄ±:</strong> DÃ¼ÅŸÃ¼k kurulum maliyeti, bÃ¼yÃ¼k Ã¶lÃ§ekli endÃ¼striyel bÃ¼yÃ¼me iÃ§in uygun.</p><p><strong class="text-[#656D4A]">DezavantajlarÄ±:</strong> GeniÅŸ alan gereksinimi, dengesiz kÃ¼ltÃ¼r koÅŸullarÄ±, kirlilik riski.</p>' },
                'btn-pbr-2': { title: 'TÃ¼bÃ¼ler FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">AvantajlarÄ±:</strong> Aseptik Ã§alÄ±ÅŸma, stabil koÅŸullar, su buharlaÅŸmasÄ±nÄ± Ã¶nler, mimari entegrasyon potansiyeli.</p><p><strong class="text-[#656D4A]">DezavantajlarÄ±:</strong> YÃ¼ksek inÅŸaat ve iÅŸletme maliyetleri.</p>' },
                'btn-pbr-3': { title: 'DÃ¼z Panel FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">AvantajlarÄ±:</strong> OlaÄŸanÃ¼stÃ¼ COâ‚‚ emilimi, optimize edilmiÅŸ mikroalg bÃ¼yÃ¼mesi, yÃ¼ksek karbon tutulumu.</p><p><strong class="text-[#656D4A]">DezavantajlarÄ±:</strong> YÃ¼ksek teknoloji gereksinimi.</p>' },
                'btn-pbr-4': { title: 'KabarcÄ±k Kolon FBR', description: '<p class="mb-2"><strong class="text-[#656D4A]">AvantajlarÄ±:</strong> SÄ±caklÄ±k kontrolÃ¼, dÃ¼ÅŸÃ¼k basÄ±nÃ§ dÃ¼ÅŸÃ¼ÅŸÃ¼, yÃ¼ksek arayÃ¼zey alanÄ±.</p><p><strong class="text-[#656D4A]">DezavantajlarÄ±:</strong> YÃ¼ksek konsantrasyonlarda etkilidir, daha karmaÅŸÄ±k yapÄ±.</p>' }
            };

            const pbrCtx = document.getElementById('pbrChart').getContext('2d');
            const pbrChart = new Chart(pbrCtx, {
                type: 'bar',
                data: pbrData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Verimlilik (%)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });

            const pbrButtons = document.querySelectorAll('.pbr-btn');
            pbrButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    pbrButtons.forEach(btn => {
                        btn.classList.remove('active-btn');
                        btn.classList.add('inactive-btn');
                    });
                    button.classList.add('active-btn');
                    button.classList.remove('inactive-btn');

                    pbrChart.data.datasets.forEach((dataset, i) => {
                        dataset.hidden = (i !== index);
                    });
                    pbrChart.update();
                    
                    const info = pbrInfo[button.id];
                    document.getElementById('pbr-title').innerText = info.title;
                    document.getElementById('pbr-description').innerHTML = info.description;
                });
            });

            const mobileSystemsData = {
                labels: ['aerium', 'Vayu', 'Liquid 3'],
                datasets: [{
                    label: 'EÅŸdeÄŸer Ev Bitkisi/AÄŸaÃ§ SayÄ±sÄ±',
                    data: [25, 40, 200], 
                    backgroundColor: ['#A2B29F', '#656D4A', '#B6AD90'],
                    borderColor: '#F8F7F4',
                    borderWidth: 2
                }]
            };

            const mobileSystemsCtx = document.getElementById('mobileSystemsChart').getContext('2d');
            new Chart(mobileSystemsCtx, {
                type: 'doughnut',
                data: mobileSystemsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        let value = context.parsed;
                                        if (context.label === 'Liquid 3') {
                                           label += `${value / 100} aÄŸaca eÅŸdeÄŸer`;
                                        } else {
                                           label += `${value} ev bitkisine eÅŸdeÄŸer`;
                                        }
                                    }
                                    return label;
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Performans (EÅŸdeÄŸer Bitki/AÄŸaÃ§ SayÄ±sÄ±)',
                            padding: { top: 10, bottom: 10 }
                        }
                    }
                }
            });
            
            const navLinks = document.querySelectorAll('header nav a');
            const sections = document.querySelectorAll('main section');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    link.classList.add('inactive-nav');
                    if (link.href.includes(current)) {
                        link.classList.add('active-nav');
                        link.classList.remove('inactive-nav');
                    }
                });
            });

            // STEM Proje Ekleme MantÄ±ÄŸÄ± (DeÄŸiÅŸmedi)
            const addProjectBtn = document.getElementById('add-project-btn');
            const projectTitleInput = document.getElementById('project-title');
            const projectDescriptionInput = document.getElementById('project-description');
            const stemProjectsContainer = document.getElementById('stem-projects-container');
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');

            function showMessage(message, duration = 3000) {
                messageText.innerText = message;
                messageBox.classList.add('show');
                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, duration);
            }

            addProjectBtn.addEventListener('click', () => {
                const title = projectTitleInput.value.trim();
                const description = projectDescriptionInput.value.trim();

                if (title === '' || description === '') {
                    showMessage('LÃ¼tfen proje baÅŸlÄ±ÄŸÄ± ve aÃ§Ä±klamasÄ±nÄ± girin.');
                    return;
                }

                const newProjectDiv = document.createElement('div');
                newProjectDiv.className = 'bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow';
                newProjectDiv.innerHTML = `
                    <h4 class="font-bold text-[#656D4A]">${title}</h4>
                    <p class="text-sm text-[#A2B29F]">${description}</p>
                `;
                stemProjectsContainer.appendChild(newProjectDiv);

                projectTitleInput.value = '';
                projectDescriptionInput.value = '';
                showMessage('Proje baÅŸarÄ±yla eklendi!');
            });

            // SensÃ¶r Veri GÃ¶rÃ¼ntÃ¼leme ElemanlarÄ±
            const co2ValueSpan = document.getElementById('co2-value');
            const mq135ValueSpan = document.getElementById('mq135-value');
            const lightValueSpan = document.getElementById('light-value');
            const tempValueSpan = document.getElementById('temp-value');
            const humidityValueSpan = document.getElementById('humidity-value');
            const statusMessageP = document.getElementById('status-message');

            function updateStatusMessage(co2, mq135, light, temperature, humidity) {
                let message = 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.';

                if (co2 === '--' || mq135 === '--' || light === '--' || temperature === '--' || humidity === '--') {
                    message = "SensÃ¶r verileri yÃ¼kleniyor veya eksik...";
                } else {
                    if (co2 > 800) {
                        message = 'YÃ¼ksek COâ‚‚ seviyesi tespit edildi! Mikroalglerin fotosentezi hÄ±zlanabilir.';
                    } else if (co2 < 400) {
                        message = 'COâ‚‚ seviyesi dÃ¼ÅŸÃ¼k, fotosentez yavaÅŸlayabilir. COâ‚‚ takviyesi dÃ¼ÅŸÃ¼nÃ¼lebilir.';
                    }

                    if (mq135 > 200) { // MQ135 iÃ§in Ã¶rnek eÅŸik (mV veya ADC deÄŸeri)
                        if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') { // MesajÄ± tekrar etmemek iÃ§in kontrol
                            message = '';
                        }
                        message += ' Hava kalitesi dÃ¼ÅŸÃ¼k algÄ±landÄ±, havalandÄ±rma kontrol edilmeli.';
                    }

                    if (light < 100) { // Lux cinsinden Ã¶rnek eÅŸik
                         if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' IÅŸÄ±k seviyesi dÃ¼ÅŸÃ¼k, fotosentez iÃ§in Ä±ÅŸÄ±k takviyesi dÃ¼ÅŸÃ¼nÃ¼lebilir.';
                    } else if (light > 1000) { // Lux cinsinden Ã¶rnek eÅŸik
                         if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' IÅŸÄ±k seviyesi yÃ¼ksek, aÅŸÄ±rÄ± Ä±ÅŸÄ±k stresi olabilir.';
                    }

                    if (temperature > 28) {
                        if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' Su sÄ±caklÄ±ÄŸÄ± yÃ¼ksek, soÄŸutma gerekli olabilir.';
                    } else if (temperature < 22) {
                        if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' Su sÄ±caklÄ±ÄŸÄ± dÃ¼ÅŸÃ¼k, Ä±sÄ±tma gerekli olabilir.';
                    }

                    if (humidity < 40) {
                        if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' Nem seviyesi dÃ¼ÅŸÃ¼k, buharlaÅŸma artabilir.';
                    } else if (humidity > 70) {
                        if (message === 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.') {
                            message = '';
                        }
                        message += ' Nem seviyesi yÃ¼ksek, yoÄŸuÅŸma ve mantar riski olabilir.';
                    }

                    if (message === '') { // EÄŸer Ã¶zel bir sorun yoksa, varsayÄ±lan iyi mesaja geri dÃ¶n
                        message = 'Sistem durumu iyi. Mikroalgler aktif olarak Ã§alÄ±ÅŸÄ±yor.';
                    }
                }
                statusMessageP.innerText = message;
            }

            // Firebase Entegrasyonu BaÅŸlangÄ±cÄ±
            let db; // Firestore veritabanÄ± Ã¶rneÄŸi
            let auth; // Firebase kimlik doÄŸrulama Ã¶rneÄŸi
            let userId; // KullanÄ±cÄ± kimliÄŸi
            
            // Canvas tarafÄ±ndan saÄŸlanan global deÄŸiÅŸkenleri kullanÄ±n
            const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

            // Firebase'i baÅŸlat
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Kimlik doÄŸrulama durumu deÄŸiÅŸtiÄŸinde dinleyici
                onAuthStateChanged(auth, async (user) => {
                    if (!user) {
                        // KullanÄ±cÄ± oturum aÃ§madÄ±ysa anonim olarak oturum aÃ§mayÄ± dene
                        try {
                            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                await signInWithCustomToken(auth, __initial_auth_token);
                                console.log("Ã–zel token ile oturum aÃ§Ä±ldÄ±.");
                            } else {
                                await signInAnonymously(auth);
                                console.log("Anonim olarak oturum aÃ§Ä±ldÄ±.");
                            }
                            userId = auth.currentUser.uid; // Oturum aÃ§tÄ±ktan sonra userId'yi al
                            console.log("Firestore userId:", userId);
                            listenForSensorData(); // Kimlik doÄŸrulama sonrasÄ± sensÃ¶r verilerini dinlemeye baÅŸla
                        } catch (error) {
                            console.error("Firebase Kimlik DoÄŸrulama HatasÄ±:", error);
                            statusMessageP.innerText = "Hata: Kimlik doÄŸrulama baÅŸarÄ±sÄ±z oldu. SensÃ¶r verileri yÃ¼klenemiyor.";
                        }
                    } else {
                        // Zaten oturum aÃ§mÄ±ÅŸsa
                        userId = user.uid;
                        console.log("KullanÄ±cÄ± zaten oturum aÃ§Ä±k:", userId);
                        listenForSensorData(); // Kimlik doÄŸrulama sonrasÄ± sensÃ¶r verilerini dinlemeye baÅŸla
                    }
                });

            } catch (error) {
                console.error("Firebase BaÅŸlatma HatasÄ±:", error);
                statusMessageP.innerText = "Hata: Firebase baÅŸlatÄ±lamadÄ±. SensÃ¶r verileri yÃ¼klenemiyor.";
            }

            // SensÃ¶r Verisi GeÃ§miÅŸini Depolama ve Grafik AyarlarÄ±
            let sensorDataHistory = [];
            const MAX_DATA_POINTS = 30; // Grafikte gÃ¶sterilecek maksimum veri noktasÄ± sayÄ±sÄ±

            // Grafik Nesneleri
            let co2Chart, mq135Chart, lightChart, tempHumidityChart;

            // Grafiklerin BaÅŸlatÄ±lmasÄ±
            function initializeCharts() {
                const defaultChartOptions = {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'category', // Zaman tabanlÄ± etiketler iÃ§in uygun
                            title: {
                                display: true,
                                text: 'Zaman'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'DeÄŸer'
                            }
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { mode: 'index', intersect: false }
                    }
                };

                // CO2 GrafiÄŸi
                const co2Ctx = document.getElementById('co2ChartCanvas').getContext('2d');
                co2Chart = new Chart(co2Ctx, {
                    type: 'line',
                    data: { labels: [], datasets: [{ label: 'COâ‚‚ (ppm)', data: [], borderColor: '#656D4A', tension: 0.1, fill: false }] },
                    options: {
                        ...defaultChartOptions,
                        scales: { ...defaultChartOptions.scales, y: { ...defaultChartOptions.scales.y, title: { display: true, text: 'COâ‚‚ (ppm)' } } }
                    }
                });

                // MQ135 Hava Kalitesi GrafiÄŸi
                const mq135Ctx = document.getElementById('mq135ChartCanvas').getContext('2d');
                mq135Chart = new Chart(mq135Ctx, {
                    type: 'line',
                    data: { labels: [], datasets: [{ label: 'Hava Kalitesi (mV)', data: [], borderColor: '#B6AD90', tension: 0.1, fill: false }] },
                    options: {
                        ...defaultChartOptions,
                        scales: { ...defaultChartOptions.scales, y: { ...defaultChartOptions.scales.y, title: { display: true, text: 'MQ135 (mV)' } } }
                    }
                });

                // IÅŸÄ±k Åiddeti GrafiÄŸi
                const lightCtx = document.getElementById('lightChartCanvas').getContext('2d');
                lightChart = new Chart(lightCtx, {
                    type: 'line',
                    data: { labels: [], datasets: [{ label: 'IÅŸÄ±k Åiddeti (lux)', data: [], borderColor: '#A2B29F', tension: 0.1, fill: false }] },
                    options: {
                        ...defaultChartOptions,
                        scales: { ...defaultChartOptions.scales, y: { ...defaultChartOptions.scales.y, title: { display: true, text: 'IÅŸÄ±k (lux)' } } }
                    }
                });

                // SÄ±caklÄ±k ve Nem GrafiÄŸi
                const tempHumidityCtx = document.getElementById('tempHumidityChartCanvas').getContext('2d');
                tempHumidityChart = new Chart(tempHumidityCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [
                            { label: 'SÄ±caklÄ±k (Â°C)', data: [], borderColor: '#333D29', tension: 0.1, fill: false },
                            { label: 'Nem (%)', data: [], borderColor: '#8E9B8D', tension: 0.1, fill: false }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        scales: { ...defaultChartOptions.scales, y: { ...defaultChartOptions.scales.y, title: { display: true, text: 'DeÄŸer' } } }
                    }
                });
            }

            // Firebase'den gerÃ§ek zamanlÄ± sensÃ¶r verilerini dinleme
            function listenForSensorData() {
                const sensorDocRef = doc(db, `artifacts/${appId}/public/data/sensors/current_data`);

                onSnapshot(sensorDocRef, (docSnap) => {
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        const timestamp = data.timestamp && data.timestamp.toDate ? data.timestamp.toDate() : new Date(); // Firestore Timestamp'Ä± JS Date'e dÃ¶nÃ¼ÅŸtÃ¼r

                        // GeÃ§miÅŸe yeni veri noktasÄ± ekle
                        const newDataPoint = {
                            timestamp: timestamp,
                            co2: data.co2,
                            mq135_value: data.mq135_value,
                            light_value: data.light_value,
                            temperature: data.temperature,
                            humidity: data.humidity
                        };
                        sensorDataHistory.push(newDataPoint);

                        // Performans iÃ§in geÃ§miÅŸ boyutunu sÄ±nÄ±rla
                        if (sensorDataHistory.length > MAX_DATA_POINTS) {
                            sensorDataHistory.shift(); // En eski noktayÄ± kaldÄ±r
                        }

                        // SayÄ±sal ekranlarÄ± gÃ¼ncelle
                        co2ValueSpan.innerText = `${data.co2 || '--'} ppm`;
                        mq135ValueSpan.innerText = `${data.mq135_value || '--'} mV`;
                        lightValueSpan.innerText = `${data.light_value || '--'} lux`;
                        tempValueSpan.innerText = `${data.temperature || '--'} Â°C`;
                        humidityValueSpan.innerText = `${data.humidity || '--'} %`;
                        updateStatusMessage(data.co2, data.mq135_value, data.light_value, data.temperature, data.humidity);

                        // Grafikleri gÃ¼ncelle
                        updateCharts();
                    } else {
                        console.log("SensÃ¶r verisi bulunamadÄ± veya henÃ¼z veri gÃ¶nderilmedi!");
                        statusMessageP.innerText = "SensÃ¶r verisi bekleniyor... LÃ¼tfen Arduino'nuzdan veri gÃ¶ndermeyi baÅŸlatÄ±n.";
                        co2ValueSpan.innerText = "-- ppm";
                        mq135ValueSpan.innerText = "-- mV";
                        lightValueSpan.innerText = "-- lux";
                        tempValueSpan.innerText = "-- Â°C";
                        humidityValueSpan.innerText = "-- %";
                    }
                }, (error) => {
                    console.error("Firestore'dan veri Ã§ekerken hata oluÅŸtu:", error);
                    statusMessageP.innerText = "Hata: SensÃ¶r verileri yÃ¼klenemiyor. Konsolu kontrol edin.";
                });
            }

            // TÃ¼m grafikleri gÃ¼ncelleme fonksiyonu
            function updateCharts() {
                const labels = sensorDataHistory.map(point => new Date(point.timestamp).toLocaleTimeString('tr-TR'));

                // CO2 GrafiÄŸi gÃ¼ncelle
                co2Chart.data.labels = labels;
                co2Chart.data.datasets[0].data = sensorDataHistory.map(point => point.co2);
                co2Chart.update();

                // MQ135 GrafiÄŸi gÃ¼ncelle
                mq135Chart.data.labels = labels;
                mq135Chart.data.datasets[0].data = sensorDataHistory.map(point => point.mq135_value);
                mq135Chart.update();

                // IÅŸÄ±k GrafiÄŸi gÃ¼ncelle
                lightChart.data.labels = labels;
                lightChart.data.datasets[0].data = sensorDataHistory.map(point => point.light_value);
                lightChart.update();

                // SÄ±caklÄ±k ve Nem GrafiÄŸi gÃ¼ncelle
                tempHumidityChart.data.labels = labels;
                tempHumidityChart.data.datasets[0].data = sensorDataHistory.map(point => point.temperature);
                tempHumidityChart.data.datasets[1].data = sensorDataHistory.map(point => point.humidity);
                tempHumidityChart.update();
            }

            // CSV Ä°ndirme Ä°ÅŸlevi
            const downloadCsvBtn = document.getElementById('download-csv-btn');
            if (downloadCsvBtn) {
                downloadCsvBtn.addEventListener('click', exportToCsv);
            }

            function exportToCsv() {
                if (sensorDataHistory.length === 0) {
                    showMessage("DÄ±ÅŸa aktarÄ±lacak veri bulunamadÄ±.");
                    return;
                }

                const headers = ["Timestamp", "CO2 (ppm)", "Hava Kalitesi (MQ135 mV)", "IÅŸÄ±k (lux)", "SÄ±caklÄ±k (Â°C)", "Nem (%)"];
                let csvContent = headers.join(",") + "\n";

                sensorDataHistory.forEach(row => {
                    const timestamp = row.timestamp ? new Date(row.timestamp).toLocaleString('tr-TR') : '';
                    const values = [
                        row.co2,
                        row.mq135_value,
                        row.light_value,
                        row.temperature,
                        row.humidity
                    ];
                    csvContent += [timestamp, ...values].join(",") + "\n"; // Timestamp'Ä± da ekleyin
                });

                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                if (link.download !== undefined) { // TarayÄ±cÄ± desteÄŸini kontrol et
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', 'mikroalg_sensor_verileri.csv');
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                    showMessage("Veriler CSV olarak dÄ±ÅŸa aktarÄ±ldÄ±!");
                } else {
                    showMessage("TarayÄ±cÄ±nÄ±z CSV dÄ±ÅŸa aktarÄ±mÄ± desteklemiyor.");
                }
            }

            // Sayfa yÃ¼klendiÄŸinde grafikleri baÅŸlat
            initializeCharts();
        });
    </script>
</body>
</html>



